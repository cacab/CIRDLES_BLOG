---
layout: default
---
<body>
  <h3> Blog Post #14 Putting the Pieces Together 06.26.2020</h3>

<p>This is exciting! All the research and implementation items I have been working on this summer term are coming together to form what I will have created in this independent study.</p>

<p>Users now have the ability to register to create accounts, login, and upload files. There is also a link to the SQUID GUI. This app is dockerized as well to support user sessions. </p>


<p>I feel that what I have created is a very solid foundation to support the addition of greater architecture implementations within this application. </p>

<iframe src="https://drive.google.com/file/d/1jvYs-VcO0uUoUyPvVx8MCtSKq17TDxPx/preview" width="640" height="480"></iframe>

<iframe src="https://drive.google.com/file/d/1I43T1jDFLA6NmbK2NDWWWWDCVbmoeNEQ/preview" width="640" height="480"></iframe>

  
  
   <br>
  <h3> Blog Post #13 Architecture Diagrams 06.22.2020</h3> 
    <iframe src="https://drive.google.com/file/d/1TNF-AUm_8BhjNhUfR0iF5B6oWAH7VbUF/preview" width="640" height="480"></iframe>
     <iframe src="https://drive.google.com/file/d/1SGV17N2ZM20XMKkAmIa-2C91rxE5NA5w/preview" width="640" height="480"></iframe>
  
  <br>
  <h3> Blog Post #12 Login Functionality and Other Additions to MERN Application 06.18.2020</h3>
<p>This week has come with additional research yet again however, the application which I have been developing is coming along with the login and registration API. </p>
  <iframe src="https://drive.google.com/file/d/19gcIphylQqKWBNh2LbV_3mmeIaQqctLs/preview" width="640" height="480"></iframe
  <p>Github repo: </p>
  <p>https://github.com/cacab/upload_app_api</p>

  <br> 

<h3>Blog Post #11 Docker, MongoDB and Tomcat 06.15.2020</h3>

<p>This week, I have been researching the implementation of MongoDB in conjunction with Tomcat, using Docker as an object pool, as well as adding onto the demo application mentioned in my previous posts.</p>

<p>This post will discuss these aforementioned research items. </p>
<p> </p>


<p>Using Docker as an object factory:</p>

<p>The implementation of Docker we are aiming for is to use Docker as something similar to an object factory for sessions. When a user is using SQUID, a new session created. When the user is done using the application, the session is then discarded. </p>
<p>A Docker registry would allow us to do just this. https://docs.docker.com/registry/deploying/
</p>
<p> </p>
<p>Using MongoDB and Tomcat together::</p>

<p>By itself, MongoDB can run without a server. However, in practice, using a server or servlet such as Tomcat can prove advantageous to house databases and their data. http://plindenbaum.blogspot.com/2010/09/using-mongodb-with-apache-tomcat.html
</p>

<br>
  <h3>Blog Post #10 Building File Application and Adding Functionality to SQUID 06.12.2020</h3>  
  <p>Side application that uses MERN (MongoDB, Express, React, NodeJs) At this time there is login functionality and the ability to upload files and store them on the server will be added shortly! </p>
  <iframe src="https://drive.google.com/file/d/1TET0Lcp-V1pXb0YqV5tLKVbJ7DZ7akn0/preview" width="640" height="480"></iframe>
  <p>Adding additional pages and routes to SQUID to prepare for the addition of session support (via the server) and the ability to store files. (again, via the server) I’m very excited about this. </p>
  <p></p>
  <br> 
    <h3> Blog Post #9 Creating Standalone File Storage Application with MongoDB 06.08.2020 </h3> 
<p> I am in the process of creating a standalone storage application that uses Tomcat and Mongo DB. This application will support login sessions and file storage through Tomcat. Upon completion, I hope to connect this application to the existing SQUID architecture. Login page coming soon!</p>
<p></p>
<p>This application I am in the process of creating uses a MERN architecture with MongoDB to store files and handle user accounts. This application is also Dockerized and works in conjunction with Tomcat and NGINX. </p>

  
  
  <br>
  <h3> Blog Post #8 Utilizing an UUID To Store Files / Discussing SQUID Architecture 06.04.2020 </h3> 
<p>After extensive research I have now came up with the following architecture to utilize in building a local SQUID application to test drive session management: </p>
<p></p>
<p>-React components and cookie library to manage login information, session IDs, etc. </p>
<p></p>
<p>-The use of an UUID to store files on the server. A UUID is a 128-bit number, which is used to identify information. (such as file information!) This information can be easily saved to a server, and then used to reopen the file from its path. </p>
<p></p>
<p>-Docker containers to encapsulate these components and allow for mobility. </p>
<p></p>
<p>After more research and asking around with industry professionals, I was able to determine that these architectures are appropriate for this project and begin work on their implementation. </p>
<p></p>
<p>I have begun building a test application that utilizes the SQUID UI and implements the mentioned architectures in this post. So far, things are running smoothly. My next post will discuss the server-side implementation of these frameworks. </p>
<p></p>

  
  <br>
  <h3>Blog Post #7 Architecture Solution- SQUID 06.01.2020</h3>
  
<p>Possible solution: </p>
<p></p>
<p>One possible solution to be implemented will be to use React’s cookie library in conjunction with docker containers to create session management. I have made contact will some industry professionals who are familiar with React, and I will be asking them for feedback. As a first step I will create a local application that uses these frameworks as well as the SQUID UI. </p>
<p></p>
<p>Factors to consider: </p>
<p></p>
<p>-Must be able to save files on server</p>
<p></p>
<p>-Need to implement method to remove files from containers safely </p>
<p></p>

  
  <br>
 <h3>Blog Post #6 Addition CORS Troubleshooting and Research 5.29.2020</h3>
<p>Previous actions taken to troubleshoot the problem: </p>
<p></p>
<p>-Modified nginx.conf using the following</p>
<p>https://enable-cors.org/server_nginx.html</p>
<p></p>
<p>-Enable CORS using npm install cors </p>
<p></p>
<p>-Modified  the web.xml file located at /Users/caitlin/apache-tomcat-9.0.34/webapps/examples/WEB-INF/web.xml and added the following: </p>
<p>http://docs.safe.com/fme/2013/html/FME_Server_DevGuide/Content/Configuring_CORS_Filtering.htm</p>
<p></p>
<p></p>
<p>-Attempted to add the above filter enabling to the web.xml file located in conf, which ideally would enable CORS across all web apps</p>
<p></p>
<p></p>
<p>-Debugging with chrome dev tools. As you can see from the below screenshot, the POST method is failing from https://cirdles.cs.cofc.edu/Services/squidReporting. </p>
<p></p>
<p></p>
<iframe src="https://drive.google.com/file/d/15rCGLMJ2Jgq-o3ZDV95Gg3IUpw0e2h9Y/preview" width="640" height="480"></iframe>
    <p></p>
<p>Next steps: </p>
<p></p>
<p>-Currently, I am enabling CORS through a plugin called Moesif CORS, which works by enabling CORS at the browser level. </p>
<p></p>
<p>-We now know that any CORS request has to be preflighted if the POST request sends an XML payload to the server. In this case, this could be possible source of the CORS error. More research will be done on this. </p>
<p></p>
<p>-Revisit configuring CORS within the application itself using a source such as the following: https://expressjs.com/en/resources/middleware/cors.html</p>
<p></p>
<p>-Additional sources: </p>
<p>https://groups.google.com/forum/#!topic/cornerstone-platform/h0HuC2yvT6w</p>


  <br>
<h3>Blog Post #5 Docker and Kubernetes- Possibility For User Sessions 5.26.2020</h3>
<p>This past Friday, I had the pleasure of attending a webinar hosted by Brent Lastner and Open Source 101. This webinar focused on the use of Docker and Kubernetes and their basics. In short, Docker is a platform-as-a-service product that uses images, which are made of layers which are generated from the Docker file. Multiple containers can share access to the same underlying image, which is a convenient tool that allows for reusability. </p>
<p></p>
<p>Kubernetes is a container orchestration system, which automates application management and deployment. In Friday’s webinar, Brent gave the example of Kubernetes being the equivalent to the cargo ship which houses Docker’s containers. </p>
<p></p>
<p>While the functionality of Docker can be limited when Docker Enterprise isn’t used, the use of Kubernetes with NGINX and Docker’s open source version to create sticky sessions. It is possible to use these architectures together to implement cookies. </p>

    <br>
      <h3>Blog Post #4 Solution to CORS Error: SQUID Web Part 2 5.21.2020</h3>
<p>In Chrome, upon attempting to upload Prawn and Task files, the following error is generated:</p>
<p>Access to XMLHttpRequest at 'http://cirdles.cs.cofc.edu/Services/squidReporting' from origin 'http://localhost:8080' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. </p>
<p>CORS stands for cross-origin resource sharing and allows for cross-domain communication from the browser. The current issue is that somewhere within SQUID’s architecture, CORS is not enabled. </p>
<p>Currently, the CORS error can be mitigated by the use of a browser plugin. </p>
<p></p>
<p>The following items have been implemented in an attempt to eliminate the error and the use of a browser plugin: </p>
<p></p>
<p>Enabling CORS in NGINX by using add_header Access-Control-Allow-Origin *;</p>
<p></p>
<p>Enabling CORS in Tomcat by using filter mapping. </p>
<p></p>
<p>Potential further items:</p>
<p>Research effective security practices to use when enabling CORS</p>
<p>Research the possibility of enabling CORS at the web application level in routes or servlets. </p>
<p>Research additional server configurations </p>

  
  
  <br>
    <h3>Blog Post #3 Solution to CORS Error: SQUID Web Part 1 5.18.2020</h3>
<p>This post discusses the debugging of SQUID Web, running locally. </p>
<p></p>
<p>In Chrome, upon attempting to upload Prawn and Task files, the following error is generated: </p>
<p></p>
<p>Access to XMLHttpRequest at 'http://cirdles.cs.cofc.edu/Services/squidReporting' from origin 'http://localhost:8080' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.</p>
<p></p>
<p>The following items fix this error: </p>
<p></p>
<p>In /usr/local/etc/nginx/nginx.conf, change the port from 80 to 8080. </p>
<p></p>
<p>In Squid/index.js, change the endpoint to https://cirdles.cs.cofc.edu/Services/squidReporting. </p>
<p></p>
<p>In Chrome, unblock CORS by a method of your choosing, such as CORS Unblock. </p>
<p></p>
<p>My next blog post will explore how to unblock CORS without using a plugin. </p>
<p></p>
  
   <br> 
  <h3>Blog Post #2 Troubleshooting SQUID Architecture Locally 5.14.2020</h3>
<p>Before beginning the process of building on to the current functionality of SQUID Web, an issue must be addressed within the application where the client-side server and the backend server are facing connectivity issues. The client-side of SQUID Web uses NGINX, while the backend uses Tomcat. Thus, a reverse proxy exists where redirection takes place from NGINX to Tomcat. Currently, something is blocked, preventing these two servers from connecting. This blog post will discuss this troubleshooting process. Here is a list of some of the commands used in this process: </p>
<p></p>
<p>Tomcat Commands: </p>
<p> </p>
<p>Start / Shutdown TomCat: </p>
<p>cd /Users/caitlin/apache-tomcat-9.0.34/bin </p>
<p>./startup.sh </p>
<p>OR</p>
<p>./shutdown.sh </p>
<p> </p>
<p>Stop Tomcat: </p>
<p>Tomcat config: </p>
<p>Users/caitlin/apache-tomcat-9.0.34/server.xml</p>
<p> </p>
<p>NGINX Commands: </p>
<p> </p>
<p>Opens config file: </p>
<p>nano /usr/local/etc/nginx/nginx.conf</p>
<p> </p>
<p>Or use </p>
<p>/usr/local/etc/nginx/</p>
<p> </p>
<p>Start/ Stop: </p>
<p> sudo brew services start nginx</p>
<p> sudo brew services stop nginx</p>
<p> </p>
<p>If the above do not work/ stubborn process: </p>
<p> </p>
<p>sudo nginx -s quit</p>
<p> </p>
<p>Load/ Unload*:</p>
<p>launchctl unload /usr/local/cellar/nginx/1.17.10/homebrew.mxcl.nginx.plist</p>
<p>launchctl load /usr/local/cellar/nginx/1.17.10/homebrew.mxcl.nginx.plist</p>
<p> </p>
<p> </p>
<p>Test NGINX configuration: </p>
<p>sudo nginx -t</p>
<p></p>
<p></p>
<p>Troubleshooting Process and Research </p>
<p></p>
<p>As we know that this issue involves NGIX failing to redirect to Tomcat properly. One possible solution to address this is to add the following to the NGINX config file: </p>
<p></p>
<p></p>
<p>server {</p>
<p>    listen 80;</p>
<p>    listen [::]:80;</p>
<p>    server_name localhost; </p>
<p></p>
<p>    location / {</p>
<p>            proxy_redirect      off;</p>
<p>            proxy_set_header    X-Real-IP $remote_addr;</p>
<p>            proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;</p>
<p>            proxy_set_header    X-Forwarded-Proto $scheme;</p>
<p>            proxy_set_header    Host $host;</p>
<p>            proxy_pass          tomcatIPaddress; </p>
<p>    }</p>
<p>}</p>
<p></p>
<p></p>
<p>Currently, existing redirects are not specified, which could potentially pose an issue. </p>
<p></p>
<p></p>
<p>The console errors associated with SQUID Web point towards bundle.js, as well as a connection refused error to localhost:8383/CirdlesWebUI. These errors could point to an issue with the proxy server. </p>
<p></p>
<p>Potential further items: </p>
<p>•	Check to see if anything is set up on an address that shouldn’t be. </p>
<p>•	Research configuring using a URI. </p>
<p></p>
<p></p>
<p>As this process continues, a solution should be reached soon. </p>
  
  
  <br>

<h3>Blog Post #1 SQUID Architecture 5.11.2020</h3>
<p>At this time, SQUID’s architecture involves the use of NGINX and Tomcat. Research implemented will explore the possibility of using these same architectures or changing the Servlets entirely. The research process behind this decision is outlined in this blog post. </p>
<p>Currently SQUID uses NGINX on the client-side of the web application, and Tomcat to execute backend functionality. In this case, the use of a reverse proxy servlet keeps utilization centralized. However, the need to create login sessions brings into question what the right steps are to add this functionality. </p>
<p>It is possible to add login functionality and session management to this current architecture. However, there exist other architectures that could be implemented as opposed to the existing servlets. This post will outline the guidelines that will be considered when researching login session capabilities and possible changes to architecture, as well as options that will allow for more robust functionality. </p>
<p>Ideally, changes in architecture that build onto the existing servlets should be considered first. While it is possible to change the architecture of SQUID entirely, there already exists a foundation that can be built upon. The following options have been featured in this post based on the plausibility of their implementation. </p>

<p>Option 1: Store sessions in Redis. </p>
Redis is a data structure store that is typically used as a database, cache, and message broker. Redis stands for remote dictionary server, and in this case, Tomcat would be configured to store its sessions in Redis, and NGIX could still be used as a reverse proxy. Currently this option makes the most sense for adding functionality to SQUID. 

<p>Option 2: Add functionality using Spring Boot. </p>
<p>This option would require that SQUID is reconfigured as a Spring Boot application. This reconfiguring process would involve the creation of a controller package. Due to the implementation of JavaFX, the IDE of choice for the CIRDLES lab is Netbeans. This option would also require the installation and configuration of the Spring Boot plugin for Netbeans, as well. This would also require Spring Boot to be configured into both Tomcat and NGINX. </p>

<p>Option 3: Change the architecture entirely. </p>
<p>While this option is the broadest one. There are several possibilities that could be implemented. As SQUID is written in Java, HTTP Session can be added, and the functionality of Tomcat can be expanded, or a JSP can be used. Other possible architecture solutions include Apache HTTP Server Project, Mongoose, or even Rwasa. 
</p>

</body>
